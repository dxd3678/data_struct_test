#nullable enable

using System;
using System.Reflection;
using StateSmith.Runner;

namespace StateSmith.Output;

public class StandardFileHeaderPrinter
{
    readonly RunnerSettings settings;

    public StandardFileHeaderPrinter(RunnerSettings settings)
    {
        this.settings = settings;
    }

    public virtual string GetFileGilHeader()
    {
        string versionInfo = MaybeGetVersionInfo();
        var result = $"// Autogenerated with StateSmith{versionInfo}.";

        if (settings.outputCodeGenTimestamp)
            result += " Last run: " + DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss tt.");

        result += "\n";

        return result;
    }

    private string MaybeGetVersionInfo()
    {
        var versionInfo = "";
        if (settings.outputStateSmithVersionInfo)
        {
            versionInfo = " " + LibVersionInfo.GetVersionInfoString();
        }

        return versionInfo;
    }
}
